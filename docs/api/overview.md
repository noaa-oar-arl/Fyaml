# API Reference Overview

The FYAML library provides a comprehensive and type-safe API for parsing YAML files in Fortran applications. This section provides detaile## Generated API Documentation

For complete API documentation generated from source code comments, see:

- **[Complete API Reference](../fyaml/)** - Generated by mkdoxy
- **[Module Overview](../fyaml/modules.md)** - All modules and their contents
- **[Namespaces](../fyaml/namespaces.md)** - Data type definitions
- **[Source Files](../fyaml/files.md)** - All functions and subroutinesntation of all modules, types, and procedures.

## API Organization

The FYAML API is organized into several modules, each serving a specific purpose:

### Core Modules

| Module | Purpose | Key Components |
|--------|---------|----------------|
| **[fyaml](fyaml.md)** | Main public interface | Primary API, high-level functions |
| **[fyaml_types](types.md)** | Type definitions | `fyaml_t`, `fyaml_var_t`, constants |
| **[fyaml_utils](utilities.md)** | Core utilities | File parsing, variable management |
| **[fyaml_string_utils](string-utils.md)** | String processing | Type conversion, parsing utilities |
| **[fyaml_error](error-handling.md)** | Error handling | Error reporting and recovery |

### Supporting Modules

| Module | Purpose |
|--------|---------|
| **fyaml_precision** | Precision definitions for numeric types |
| **fyaml_constants** | Global constants and parameters |

## Quick API Reference

### Essential Types

```fortran
! Main configuration object
type :: fyaml_t
    ! Holds parsed YAML data and variables
end type

! Individual variable container
type :: fyaml_var_t
    ! Stores single variable with metadata
end type
```

### Core Functions

#### Initialization and Cleanup
```fortran
! Initialize from file
subroutine fyaml_init(fileName, yml, yml_anchored, RC)

! Clean up resources
subroutine fyaml_cleanup(yml)
```

#### Data Access
```fortran
! Get values (overloaded for all types)
subroutine fyaml_get(yml, var_name, value, RC)

! Add values (overloaded for all types)
subroutine fyaml_add(yml, var_name, value, comment, RC)

! Check if variable exists
subroutine fyaml_check(yml, var_name, exists)
```

#### Utility Functions
```fortran
! Get variable size
subroutine fyaml_get_size(yml, var_name, var_size, RC)

! Get variable type
subroutine fyaml_get_type(yml, var_name, var_type, RC)

! Merge configurations
subroutine fyaml_merge(yml1, yml2, yml_merged, RC)
```

## Type Safety

FYAML provides type-safe interfaces through Fortran's generic interface feature:

```fortran
interface fyaml_get
    module procedure get_real, get_real_array
    module procedure get_int, get_int_array
    module procedure get_string, get_string_array
    module procedure get_bool, get_bool_array
end interface
```

This ensures compile-time type checking and prevents runtime type errors.

## Error Handling

All FYAML procedures return an integer return code (`RC`):

- `fyaml_Success` (0) - Operation completed successfully
- `fyaml_Failure` (non-zero) - Operation failed

```fortran
integer :: RC
call fyaml_get(yml, "my_var", value, RC)
if (RC /= fyaml_Success) then
    write(*,*) "Error getting variable!"
    return
endif
```

## Data Type Support

FYAML supports all common Fortran data types:

| YAML Type | Fortran Type | Array Support | Example |
|-----------|--------------|---------------|---------|
| Integer | `integer` | ✅ | `count: 42` |
| Float | `real(yp)` | ✅ | `value: 3.14159` |
| String | `character(len=*)` | ✅ | `name: "FYAML"` |
| Boolean | `logical` | ✅ | `debug: true` |

### Precision

FYAML uses configurable precision for real numbers through the `yp` parameter:

```fortran
use fyaml_precision, only: yp
real(yp) :: my_real_value
```

## Advanced Features

### Anchors and Aliases

FYAML fully supports YAML anchors and merge keys:

```yaml
defaults: &default_settings
  timeout: 30
  retries: 3

config:
  <<: *default_settings  # Merges anchor content
  workers: 10
```

### Categories

Variables can be organized hierarchically:

```fortran
call fyaml_get(yml, "production_config%database%host", host, RC)
```

### Dynamic Arrays

Arrays are automatically sized based on YAML content:

```yaml
numbers: [1, 2, 3, 4, 5]
```

```fortran
integer, allocatable :: numbers(:)
call fyaml_get(yml, "numbers", numbers, RC)
```

## Generated API Documentation

This API reference combines both manually curated documentation and auto-generated documentation from the source code:

### Manual Documentation
- **[Overview](overview.md)** - This page with API introduction and examples
- **[Core Module](fyaml.md)** - Main interface functions and usage patterns
- **[Types and Constants](types.md)** - Data types, constants, and their usage
- **[Utilities](utilities.md)** - Helper functions and utilities
- **[String Utils](string-utils.md)** - String processing functions
- **[Error Handling](error-handling.md)** - Error management and recovery
- **[Parser Internals](parser.md)** - Advanced parser functionality

### Auto-Generated Documentation
The following pages are automatically generated from source code comments using Doxygen and mkdoxy:

- **[Modules Index](../fyaml/modules.md)** - Complete list of all modules
- **[Namespaces Index](../fyaml/namespaces.md)** - All namespaces and their contents
- **[Files Index](../fyaml/files.md)** - Source file documentation
- **[FYAML Core](../fyaml/namespacefyaml.md)** - Main fyaml module
- **[FYAML Types](../fyaml/namespacefyaml__types.md)** - Type definitions
- **[FYAML Utils](../fyaml/namespacefyaml__utils.md)** - Utility functions
- **[String Utils](../fyaml/namespacefyaml__string__utils.md)** - String processing
- **[Error Module](../fyaml/namespacefyaml__error.md)** - Error handling
- **[Constants](../fyaml/namespacefyaml__constants.md)** - Global constants
- **[Precision](../fyaml/namespacefyaml__precision.md)** - Precision definitions

## Integration Patterns

### Configuration Management
```fortran
! Load application configuration
call fyaml_init("app_config.yml", config, RC)

! Get database settings
call fyaml_get(config, "database%host", db_host, RC)
call fyaml_get(config, "database%port", db_port, RC)
```

### Scientific Computing
```fortran
! Load simulation parameters
call fyaml_init("simulation.yml", params, RC)

! Get array parameters
call fyaml_get(params, "grid_dimensions", grid_dims, RC)
call fyaml_get(params, "initial_conditions", init_values, RC)
```

### Multi-Environment Support
```fortran
! Load environment-specific config
call fyaml_init("config.yml", base_config, RC)

! Merge environment overrides
call fyaml_init("production.yml", prod_config, RC)
call fyaml_merge(base_config, prod_config, final_config, RC)
```

## Best Practices

1. **Always check return codes** for robust error handling
2. **Use meaningful variable names** with category prefixes
3. **Initialize configurations early** in application startup
4. **Clean up resources** with `fyaml_cleanup()` before exit
5. **Use type-specific get routines** for compile-time safety
6. **Leverage anchors** to avoid configuration duplication

## Next Steps

- **[Basic Usage Guide](../user-guide/basic-usage.md)** - Learn fundamental operations
- **[Advanced Features](../user-guide/anchors-aliases.md)** - Master anchors and aliases
- **[Error Handling](../user-guide/error-handling.md)** - Robust error management
- **[Examples](../getting-started/examples.md)** - Real-world usage patterns
